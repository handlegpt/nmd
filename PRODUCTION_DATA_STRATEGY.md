# 生产环境数据管理策略

## 当前Mock数据清理计划

### 1. 地点数据 (Places) 管理

#### 当前状态
- ✅ Supabase数据库已连接，但places表为空
- ❌ 使用fallback/mock数据：`getFallbackPlaces()`, `SAMPLE_PLACES`, `CITY_SPECIFIC_PLACES`

#### 解决方案
**选项A: 保留精选Mock数据作为种子数据**
- 将高质量的mock数据迁移到Supabase数据库
- 标记为"系统推荐"或"社区精选"
- 允许用户添加、编辑、删除

**选项B: 完全移除Mock数据**
- 清空所有mock数据
- 只显示用户真实添加的地点
- 提供更好的"添加地点"引导

### 2. 城市数据 (Cities) 管理

#### 当前状态
- ✅ Supabase中有40个真实城市数据
- ❌ 部分组件仍使用mock城市数据

#### 解决方案
- 移除所有mock城市数据
- 统一使用Supabase中的真实城市数据
- 确保所有组件都从数据库获取数据

### 3. 用户数据 (Meetups) 管理

#### 当前状态
- ❌ 使用mock用户数据：`getMockUsers()`
- ❌ 显示虚假的在线用户和meetup信息

#### 解决方案
- 移除mock用户数据
- 实现真实的用户在线状态
- 或者暂时隐藏这些功能直到有真实数据

## 推荐实施方案

### 阶段1: 立即清理 (高优先级)
1. **移除虚假用户数据**
   - 清理 `getMockUsers()` 和相关mock数据
   - 避免误导用户

2. **统一城市数据源**
   - 移除 `CityRanking.tsx` 中的mock城市
   - 确保所有城市数据来自Supabase

### 阶段2: 地点数据迁移 (中优先级)
1. **精选Mock数据迁移**
   - 选择高质量的mock地点数据
   - 批量导入到Supabase数据库
   - 标记为"系统推荐"

2. **移除Fallback机制**
   - 清理 `getFallbackPlaces()`
   - 改善"无数据"状态的用户体验

### 阶段3: 用户体验优化 (低优先级)
1. **空状态优化**
   - 设计友好的"暂无数据"页面
   - 提供添加数据的引导

2. **数据质量保证**
   - 实现数据验证机制
   - 添加数据审核流程

## 数据添加方式

### 1. 管理员批量导入
```sql
-- 示例：批量插入精选地点数据
INSERT INTO places (name, category, city_id, address, description, ...)
VALUES 
  ('Canggu Hub', 'coworking', 'Bali', 'Canggu, Bali, Indonesia', '...', ...),
  ('Revolver Espresso', 'cafe', 'Bali', 'Seminyak, Bali, Indonesia', '...', ...);
```

### 2. 用户贡献
- 通过网站界面添加
- 社区审核机制
- 积分/奖励系统

### 3. API集成
- 集成Google Places API
- 集成Foursquare API
- 自动数据同步

## 实施建议

### 立即执行
1. 移除所有mock用户数据
2. 统一城市数据源
3. 改善空状态用户体验

### 短期计划 (1-2周)
1. 精选并迁移高质量mock地点数据
2. 实现用户添加地点功能
3. 添加数据验证和审核

### 长期计划 (1-3个月)
1. 实现社区贡献系统
2. 集成外部API数据源
3. 建立数据质量监控

## 风险评估

### 高风险
- 完全移除mock数据可能导致空页面
- 用户可能无法找到有用的信息

### 中风险
- 数据迁移过程中的数据丢失
- 用户体验暂时下降

### 低风险
- 数据质量不一致
- 维护成本增加

## 建议的渐进式方案

1. **保留精选Mock数据** - 作为种子数据
2. **标记数据来源** - 区分系统推荐和用户贡献
3. **逐步替换** - 用真实数据替换mock数据
4. **社区驱动** - 鼓励用户贡献真实数据
